<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal CNC Spindle Motor Controller: Encoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Universal CNC Spindle Motor Controller
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
   <div id="projectbrief">Interfaces Standard 110v routers with a Stm32 Nucleo Microcontroller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classEncoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Encoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines the class for an <a class="el" href="classEncoder.html" title="Defines the class for an Encoder.">Encoder</a>.  
 <a href="classEncoder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="encoder_8h_source.html">encoder.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3622cc252646c63cfed6046ad0a195d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEncoder.html#a3622cc252646c63cfed6046ad0a195d6">Encoder</a> (uint8_t A_pin, uint8_t B_pin, uint8_t Button_pin)</td></tr>
<tr class="memdesc:a3622cc252646c63cfed6046ad0a195d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that creates an encoder object.  <a href="classEncoder.html#a3622cc252646c63cfed6046ad0a195d6">More...</a><br /></td></tr>
<tr class="separator:a3622cc252646c63cfed6046ad0a195d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77234dbdc7bc4376effcc51df109533c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEncoder.html#a77234dbdc7bc4376effcc51df109533c">update_spin</a> (void)</td></tr>
<tr class="memdesc:a77234dbdc7bc4376effcc51df109533c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that interprets the A and B encoder signals as rotation.  <a href="classEncoder.html#a77234dbdc7bc4376effcc51df109533c">More...</a><br /></td></tr>
<tr class="separator:a77234dbdc7bc4376effcc51df109533c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb6faf4a598a9817ead502663ce864a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEncoder.html#aeb6faf4a598a9817ead502663ce864a8">update_press</a> (void)</td></tr>
<tr class="memdesc:aeb6faf4a598a9817ead502663ce864a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that interprets the press of the encoder.  <a href="classEncoder.html#aeb6faf4a598a9817ead502663ce864a8">More...</a><br /></td></tr>
<tr class="separator:aeb6faf4a598a9817ead502663ce864a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a23abdfe75482d1f07165339b5813cde5"><td class="memItemLeft" align="right" valign="top"><a id="a23abdfe75482d1f07165339b5813cde5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>pressed</b></td></tr>
<tr class="separator:a23abdfe75482d1f07165339b5813cde5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460eccfdf860434a04158a215d37681a"><td class="memItemLeft" align="right" valign="top"><a id="a460eccfdf860434a04158a215d37681a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>count</b></td></tr>
<tr class="separator:a460eccfdf860434a04158a215d37681a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca21d6c417f0c73c0cc2e0e92c62006"><td class="memItemLeft" align="right" valign="top"><a id="a8ca21d6c417f0c73c0cc2e0e92c62006"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>max_count</b></td></tr>
<tr class="separator:a8ca21d6c417f0c73c0cc2e0e92c62006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48e7ab97cc884bdf296b621b10454519"><td class="memItemLeft" align="right" valign="top"><a id="a48e7ab97cc884bdf296b621b10454519"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>resolution</b></td></tr>
<tr class="separator:a48e7ab97cc884bdf296b621b10454519"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3caf7c24912e7bce54bfece635de415b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEncoder.html#a3caf7c24912e7bce54bfece635de415b">debounce</a> (uint8_t signal_pin, uint8_t limit)</td></tr>
<tr class="memdesc:a3caf7c24912e7bce54bfece635de415b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that debounces the hardware pin for the encoder button.  <a href="classEncoder.html#a3caf7c24912e7bce54bfece635de415b">More...</a><br /></td></tr>
<tr class="separator:a3caf7c24912e7bce54bfece635de415b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a58c0367c868429180068683ce4a55b28"><td class="memItemLeft" align="right" valign="top"><a id="a58c0367c868429180068683ce4a55b28"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>A_pin</b></td></tr>
<tr class="separator:a58c0367c868429180068683ce4a55b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e57117bf1fabca73be74b5df15dd4e"><td class="memItemLeft" align="right" valign="top"><a id="a35e57117bf1fabca73be74b5df15dd4e"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>B_pin</b></td></tr>
<tr class="separator:a35e57117bf1fabca73be74b5df15dd4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb4b820c06e97ed1846369db2544df9"><td class="memItemLeft" align="right" valign="top"><a id="abfb4b820c06e97ed1846369db2544df9"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>Button_pin</b></td></tr>
<tr class="separator:abfb4b820c06e97ed1846369db2544df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d0d8c9b07843e790386ec6a380bb556"><td class="memItemLeft" align="right" valign="top"><a id="a6d0d8c9b07843e790386ec6a380bb556"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>current_reading</b></td></tr>
<tr class="separator:a6d0d8c9b07843e790386ec6a380bb556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7a64816076b86ff31063ba3a5a2e65"><td class="memItemLeft" align="right" valign="top"><a id="afe7a64816076b86ff31063ba3a5a2e65"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>previous_reading</b></td></tr>
<tr class="separator:afe7a64816076b86ff31063ba3a5a2e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the class for an <a class="el" href="classEncoder.html" title="Defines the class for an Encoder.">Encoder</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3622cc252646c63cfed6046ad0a195d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3622cc252646c63cfed6046ad0a195d6">&#9670;&nbsp;</a></span>Encoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Encoder::Encoder </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>Press</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that creates an encoder object. </p>
<p>This function creates an encoder object at specified hardware pins. The hardware pins for the encoder must be passed as arguments, <code>A</code>, <code>B</code>, and <code>Press</code> </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3caf7c24912e7bce54bfece635de415b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3caf7c24912e7bce54bfece635de415b">&#9670;&nbsp;</a></span>debounce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Encoder::debounce </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>signal_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that debounces the hardware pin for the encoder button. </p>
<p>The encoder can be sensitive to presses, especially if the user is also twising and torquing it. This function debounces the signal that the encoder's button is connected to to make sure that it is actually being pressed. </p>

</div>
</div>
<a id="aeb6faf4a598a9817ead502663ce864a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb6faf4a598a9817ead502663ce864a8">&#9670;&nbsp;</a></span>update_press()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Encoder::update_press </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that interprets the press of the encoder. </p>
<p>When called in an ISR, this function debounces the press hardware pin, with a length of 20 (can be changed here). If the signal is debounced, then it returns true. </p>

</div>
</div>
<a id="a77234dbdc7bc4376effcc51df109533c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77234dbdc7bc4376effcc51df109533c">&#9670;&nbsp;</a></span>update_spin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Encoder::update_spin </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that interprets the A and B encoder signals as rotation. </p>
<p>This function reads the A and B encoder pins and calculates whether it is being spun in the clockwise are counterclockwise direction. The calculations below are inspired by the "grey code" method used on Sparkfun's website for the COM-09117 encoder knob. URL: <a href="https://www.sparkfun.com/products/9117">https://www.sparkfun.com/products/9117</a> Download the file hyperlinked as "Example Arduino Project" The example file uses binary numbers and bit shifting. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="encoder_8h_source.html">encoder.h</a></li>
<li><a class="el" href="encoder_8cpp.html">encoder.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
